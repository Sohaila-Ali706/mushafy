<main class="tafsir-page">
  <header class="page-header">
    <div>
      <h1>فهرس التفسير</h1>
      <p>اختاري السورة لعرض التفسير.</p>
    </div>
    <div class="header-actions">
      <button class="resume-btn" *ngIf="lastRead" type="button" (click)="resumeLastRead()">
        كمل من آخر قراءة
        <span class="resume-sub">سورة رقم {{lastRead.surahNumber}}</span>
        <span class="resume-sub" *ngIf="lastRead?.tafsirTitle">({{lastRead.tafsirTitle}})</span>
      </button>
      <button class="back-btn" routerLink="/">العودة للرئيسية</button>
    </div>
  </header>

  <div class="select-box" *ngIf="translations.length">
    <label for="tafsirKey">اختيار نسخة التفسير</label>
    <select id="tafsirKey" [value]="selectedKey" (change)="updateKey($any($event.target).value)">
      <option *ngFor="let t of translations" [value]="t.identifier">{{t.name || t.englishName}}</option>
    </select>
  </div>

  <div class="search-box">
    <label for="tafsirSearch">بحث عن سورة</label>
    <input id="tafsirSearch" type="text" [(ngModel)]="searchTerm" placeholder="ابحث بالاسم أو الرقم" />
  </div>

  <div *ngIf="loading" class="status">جارٍ تحميل الفهرس...</div>
  <div *ngIf="error" class="status error">{{error}}</div>

  <section class="surah-grid" *ngIf="!loading && !error">
    <button class="surah-card" *ngFor="let surah of filteredSurahs" (click)="openSurah(surah)">
      <div class="surah-number">{{surah.number}}</div>
      <div class="surah-title">{{surah.name}}</div>
      <div class="surah-meta">عدد الآيات: {{surah.numberOfAyahs}}</div>
    </button>
  </section>
</main>
